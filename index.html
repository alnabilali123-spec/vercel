<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>مساعد alnabil</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f4f4f4; display:flex; justify-content:center; padding:40px; }
    #chat { width:100%; max-width:600px; background:#fff; padding:20px; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.1); }
    h1 { text-align:center; color:#333; }
    #messages { border:1px solid #ccc; padding:10px; height:300px; overflow-y:auto; margin-bottom:10px; background:#fafafa; border-radius:8px; }
    .msg-user { text-align:right; margin:5px; color:#0066cc; }
    .msg-bot { text-align:left; margin:5px; color:#333; }
    textarea { width:100%; padding:10px; border-radius:8px; border:1px solid #ccc; resize:none; }
    button { margin-top:10px; padding:10px 20px; background:#0066cc; color:#fff; border:none; border-radius:8px; cursor:pointer; }
    button:hover { background:#004999; }
  </style>
</head>
<body>
  <div id="chat">
    <h1>💬 مساعد alnabil</h1>
    <div id="messages"></div>
    <textarea id="userInput" rows="3" placeholder="اكتب سؤالك هنا..."></textarea>
    <button onclick="sendMessage()">إرسال</button>
  </div>

  <script>
    async function sendMessage() {
      const input = document.getElementById("userInput");
      const messagesDiv = document.getElementById("messages");
      const userMsg = input.value.trim();
      if (!userMsg) return;

      messagesDiv.innerHTML += `<div class='msg-user'>${userMsg}</div>`;
      input.value = "";
      messagesDiv.scrollTop = messagesDiv.scrollHeight;

      try {
        const response = await fetch("https://openrouter.ai/api/v1/chat/completions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": "Bearer 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"
          },
          body: JSON.stringify({
            model: "preset:alnabil",
            messages: [{ role: "user", content: userMsg }]
          })
        });

        const data = await response.json();
        const botReply = data.choices?.[0]?.message?.content || "❌ لم يصل رد من الخادم";
        messagesDiv.innerHTML += `<div class='msg-bot'>${botReply}</div>`;
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
      } catch (err) {
        messagesDiv.innerHTML += `<div class='msg-bot'>⚠️ خطأ في الاتصال</div>`;
      }
    }
  </script>
</body>
</html>
